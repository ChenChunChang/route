(function(){"use strict";var e=function(e){e=e||{};var t={},n=Array.prototype.slice;Object.defineProperties(e,{on:{value:function(n,r){if(typeof r=="function")(t[n]=t[n]||[]).push(r);return e},enumerable:false,writable:false,configurable:false},off:{value:function(n,r){if(n=="*"&&!r)t={};else{if(r){var i=t[n];for(var f=0,o;o=i&&i[f];++f){if(o==r)i.splice(f--,1)}}else delete t[n]}return e},enumerable:false,writable:false,configurable:false},one:{value:function(t,n){function r(){e.off(t,r);n.apply(e,arguments)}return e.on(t,r)},enumerable:false,writable:false,configurable:false},trigger:{value:function(r){var i=arguments.length-1,f=new Array(i),o,u,a;for(a=0;a<i;a++){f[a]=arguments[a+1]}o=n.call(t[r]||[],0);for(a=0;u=o[a];++a){u.apply(e,f)}if(t["*"]&&r!="*")e.trigger.apply(e,["*",r].concat(f));return e},enumerable:false,writable:false,configurable:false}});return e};var t=/^.+?\/\/+[^\/]+/,n="EventListener",r="remove"+n,i="add"+n,f="hasAttribute",o="replace",u="popstate",a="hashchange",l="trigger",s=3,c=typeof window!="undefined"&&window,h=typeof document!="undefined"&&document,p=c&&history,d=c&&(p.location||c.location),v=j.prototype,m=h&&h.ontouchstart?"touchstart":"click",b=false,g=e(),y=false,w,$,A,x,K,N=[],O=0;function S(e){return e.split(/[\/?#]/)}function T(e,t){var n=new RegExp("^"+t[o](/\*/g,"([^/?#]+?)")[o](/\.\./,".*")+"$"),r=e.match(n);if(r)return r.slice(1)}function E(e,t){var n;return function(){clearTimeout(n);n=setTimeout(e,t)}}function P(e){w=E(R,1);c[i](u,w);c[i](a,w);h[i](m,_);if(e)R(true)}function j(){this.$=[];e(this);g.on("stop",this.s.bind(this));g.on("emit",this.e.bind(this))}function k(e){return e[o](/^\/|\/$/,"")}function q(e){return typeof e=="string"}function D(e){return(e||d.href)[o](t,"")}function L(e){return $[0]=="#"?(e||d.href||"").split($)[1]||"":(d?D(e):e||"")[o]($,"")}function R(e){var t=O==0,n;if(s<=O)return;O++;N.push(function(){var t=L();if(e||t!=A){g[l]("emit",t);A=t}});if(t){while(n=N.shift())n();O=0}}function _(e){if(e.which!=1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;var n=e.target;while(n&&n.nodeName!="A")n=n.parentNode;if(!n||n.nodeName!="A"||n[f]("download")||!n[f]("href")||n.target&&n.target!="_self"||n.href.indexOf(d.href.match(t)[0])==-1)return;if(n.href!=d.href&&(n.href.split("#")[0]==d.href.split("#")[0]||$[0]!="#"&&D(n.href).indexOf($)!==0||$[0]=="#"&&n.href.split($)[0]!=d.href.split($)[0]||!z(L(n.href),n.title||h.title)))return;e.preventDefault()}function z(e,t,n){if(!p)return g[l]("emit",L(e));e=$+k(e);t=t||h.title;n?p.replaceState(null,t,e):p.pushState(null,t,e);h.title=t;y=false;R();return y}v.m=function(e,t,n){if(q(e)&&(!t||q(t)))z(e,t,n||false);else if(t)this.r(e,t);else this.r("@",e)};v.s=function(){this.off("*");this.$=[]};v.e=function(e){this.$.concat("@").some(function(t){var n=(t=="@"?x:K)(k(e),k(t));if(typeof n!="undefined"){this[l].apply(null,[t].concat(n));return y=true}},this)};v.r=function(e,t){if(e!="@"){e="/"+k(e);this.$.push(e)}this.on(e,t)};var B=new j;var C=B.m.bind(B);C.create=function(){var e=new j;var t=e.m.bind(e);t.stop=e.s.bind(e);return t};C.base=function(e){$=e||"#";A=L()};C.exec=function(){R(true)};C.parser=function(e,t){if(!e&&!t){x=S;K=T}if(e)x=e;if(t)K=t};C.query=function(){var e={};var t=d.href||A;t[o](/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r});return e};C.stop=function(){if(b){if(c){c[r](u,w);c[r](a,w);h[r](m,_)}g[l]("stop");b=false}};C.start=function(e){if(!b){if(c){if(document.readyState=="complete")P(e);else c[i]("load",function(){setTimeout(function(){P(e)},1)})}b=true}};C.base();C.parser();window.route=C})();